<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Digital Triage Chatbot</title>
    <style>
        /* Reset and Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Roboto', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background-color: #FFFFFF;
            color: #333333;
            line-height: 1.5;
        }

        /* Typography */
        .font-heading {
            font-weight: 700;
            letter-spacing: -0.025em;
        }

        .font-paragraph {
            font-weight: 400;
            letter-spacing: 0em;
        }

        /* Color Classes */
        .bg-mild { background-color: #808080; }
        .bg-moderate { background-color: #FFA500; }
        .bg-severe { background-color: #FF4500; }
        .bg-emergency { background-color: #FF0000; }
        .text-mild { color: #808080; }
        .text-moderate { color: #FFA500; }
        .text-severe { color: #FF4500; }
        .text-emergency { color: #FF0000; }

        /* Layout */
        .container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        .flex {
            display: flex;
        }

        .flex-col {
            flex-direction: column;
        }

        .items-center {
            align-items: center;
        }

        .justify-between {
            justify-content: space-between;
        }

        .justify-end {
            justify-content: flex-end;
        }

        .justify-start {
            justify-content: flex-start;
        }

        .gap-4 {
            gap: 1rem;
        }

        .gap-2 {
            gap: 0.5rem;
        }

        .space-y-4 > * + * {
            margin-top: 1rem;
        }

        .space-y-2 > * + * {
            margin-top: 0.5rem;
        }

        /* Header */
        .header {
            background: white;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            border-bottom: 1px solid #EAEAEA;
            padding: 1rem 0;
        }

        .header h1 {
            font-size: 1.5rem;
            font-weight: 700;
            color: #333333;
        }

        .header p {
            font-size: 0.875rem;
            color: rgba(51, 51, 51, 0.6);
        }

        /* Chat Container */
        .chat-container {
            min-height: calc(100vh - 80px);
            display: flex;
            flex-direction: column;
            padding: 2rem 0;
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            margin-bottom: 1.5rem;
            max-height: 60vh;
            padding-right: 0.5rem;
        }

        .chat-messages::-webkit-scrollbar {
            width: 6px;
        }

        .chat-messages::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 3px;
        }

        .chat-messages::-webkit-scrollbar-thumb {
            background: #c1c1c1;
            border-radius: 3px;
        }

        /* Chat Message */
        .message {
            margin-bottom: 1rem;
            animation: fadeInUp 0.3s ease-out;
        }

        .message-user {
            display: flex;
            justify-content: flex-end;
        }

        .message-bot {
            display: flex;
            justify-content: flex-start;
        }

        .message-content {
            max-width: 28rem;
            position: relative;
        }

        .urgency-bar {
            height: 4px;
            width: 100%;
            margin-bottom: 0.5rem;
            border-radius: 2px 2px 0 0;
        }

        .message-bubble {
            padding: 1rem;
            border-radius: 0.5rem;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            position: relative;
        }

        .message-bubble-user {
            background-color: #007AFF;
            color: white;
        }

        .message-bubble-bot {
            background-color: white;
            color: #333333;
            border: 1px solid #EAEAEA;
        }

        .message-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 0.5rem;
            font-size: 0.75rem;
            opacity: 0.6;
        }

        /* Badge */
        .badge {
            display: inline-block;
            padding: 0.25rem 0.5rem;
            border-radius: 0.25rem;
            font-size: 0.75rem;
            font-weight: 500;
            color: white;
        }

        /* Buttons */
        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 0.25rem;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.2s;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            text-decoration: none;
        }

        .btn-primary {
            background-color: #007AFF;
            color: white;
        }

        .btn-primary:hover {
            background-color: #0056CC;
        }

        .btn-outline {
            background-color: transparent;
            color: #007AFF;
            border: 1px solid #007AFF;
        }

        .btn-outline:hover {
            background-color: #007AFF;
            color: white;
        }

        .btn-sm {
            padding: 0.5rem 1rem;
            font-size: 0.875rem;
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Input */
        .input-group {
            position: relative;
            flex: 1;
        }

        .input {
            width: 100%;
            padding: 0.75rem 3rem 0.75rem 1rem;
            border: 1px solid #EAEAEA;
            border-radius: 0.25rem;
            font-size: 1rem;
            outline: none;
            transition: border-color 0.2s;
        }

        .input:focus {
            border-color: #007AFF;
            box-shadow: 0 0 0 3px rgba(0, 122, 255, 0.1);
        }

        .input-icon {
            position: absolute;
            right: 0.75rem;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            cursor: pointer;
            color: #666;
            padding: 0.25rem;
        }

        /* Cards */
        .card {
            background: white;
            border: 1px solid #EAEAEA;
            border-radius: 0.5rem;
            padding: 1rem;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        /* Common Symptoms */
        .symptoms-grid {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
        }

        /* Clinics Grid */
        .clinics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        /* Loading Animation */
        .loading {
            display: flex;
            gap: 0.5rem;
            padding: 1rem;
        }

        .loading-dot {
            width: 8px;
            height: 8px;
            background-color: #007AFF;
            border-radius: 50%;
            animation: bounce 1.4s ease-in-out infinite both;
        }

        .loading-dot:nth-child(1) { animation-delay: -0.32s; }
        .loading-dot:nth-child(2) { animation-delay: -0.16s; }

        /* Dashboard */
        .dashboard {
            min-height: 100vh;
            padding: 2rem 0;
        }

        .table-container {
            overflow-x: auto;
            background: white;
            border-radius: 0.5rem;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .table {
            width: 100%;
            border-collapse: collapse;
        }

        .table th,
        .table td {
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid #EAEAEA;
        }

        .table th {
            background-color: #f8f9fa;
            font-weight: 600;
        }

        /* FAQ */
        .faq-grid {
            display: grid;
            gap: 1.5rem;
        }

        /* Animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes bounce {
            0%, 80%, 100% {
                transform: scale(0);
            }
            40% {
                transform: scale(1);
            }
        }

        /* Responsive */
        @media (max-width: 768px) {
            .container {
                padding: 0 1rem;
            }

            .header {
                padding: 0.75rem 0;
            }

            .chat-container {
                padding: 1rem 0;
            }

            .message-content {
                max-width: 85%;
            }

            .clinics-grid {
                grid-template-columns: 1fr;
            }

            .symptoms-grid {
                justify-content: center;
            }
        }

        /* Utility Classes */
        .hidden { display: none; }
        .text-center { text-align: center; }
        .text-sm { font-size: 0.875rem; }
        .text-lg { font-size: 1.125rem; }
        .text-xl { font-size: 1.25rem; }
        .text-2xl { font-size: 1.5rem; }
        .text-4xl { font-size: 2.25rem; }
        .mb-2 { margin-bottom: 0.5rem; }
        .mb-4 { margin-bottom: 1rem; }
        .mb-6 { margin-bottom: 1.5rem; }
        .mb-8 { margin-bottom: 2rem; }
        .mt-4 { margin-top: 1rem; }
        .w-full { width: 100%; }
        .max-w-md { max-width: 28rem; }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="flex justify-between items-center">
                <div>
                    <h1 class="font-heading">Digital Triage</h1>
                    <p class="font-paragraph">Your health, simplified</p>
                </div>
                <div class="flex gap-4">
                    <button class="btn btn-outline btn-sm" onclick="showFAQs()">FAQs</button>
                    <button class="btn btn-outline btn-sm" onclick="showDashboard()">Dashboard</button>
                    <select id="languageSelect" class="input" style="width: auto; padding: 0.5rem;">
                        <option value="en">English</option>
                        <option value="es">Español</option>
                    </select>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Chat Interface -->
    <div id="chatInterface" class="chat-container">
        <div class="container">
            <!-- Chat Messages -->
            <div id="chatMessages" class="chat-messages space-y-4">
                <!-- Messages will be inserted here -->
            </div>

            <!-- Common Symptoms -->
            <div id="commonSymptoms" class="mb-6">
                <h3 class="text-lg font-heading mb-4">Common Symptoms</h3>
                <div class="symptoms-grid" id="symptomsGrid">
                    <!-- Symptom buttons will be inserted here -->
                </div>
            </div>

            <!-- Clinics (shown for severe cases) -->
            <div id="clinicsSection" class="mb-6 hidden">
                <h3 class="text-lg font-heading mb-4">Nearby Healthcare Facilities</h3>
                <div class="clinics-grid" id="clinicsGrid">
                    <!-- Clinic cards will be inserted here -->
                </div>
            </div>

            <!-- Input Area -->
            <div class="flex gap-4">
                <div class="input-group">
                    <input 
                        type="text" 
                        id="messageInput" 
                        class="input" 
                        placeholder="Describe your symptoms..."
                        onkeypress="handleKeyPress(event)"
                    >
                    <button class="input-icon" onclick="toggleVoiceInput()" id="voiceBtn">
                        🎤
                    </button>
                </div>
                <button class="btn btn-primary" onclick="sendMessage()" id="sendBtn">
                    Send
                </button>
            </div>
        </div>
    </div>

    <!-- Dashboard -->
    <div id="dashboard" class="dashboard hidden">
        <div class="container">
            <div class="flex justify-between items-center mb-8">
                <h1 class="text-4xl font-heading">Clinician Dashboard</h1>
                <button class="btn btn-outline" onclick="showChat()">Back to Chat</button>
            </div>
            
            <div class="table-container">
                <table class="table">
                    <thead>
                        <tr>
                            <th class="font-heading">Timestamp</th>
                            <th class="font-heading">User Input</th>
                            <th class="font-heading">Detected Symptoms</th>
                            <th class="font-heading">Urgency Level</th>
                            <th class="font-heading">Guidance</th>
                        </tr>
                    </thead>
                    <tbody id="dashboardTable">
                        <!-- Dashboard rows will be inserted here -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- FAQ Section -->
    <div id="faqSection" class="dashboard hidden">
        <div class="container">
            <div class="flex justify-between items-center mb-8">
                <h1 class="text-4xl font-heading">Frequently Asked Questions</h1>
                <button class="btn btn-outline" onclick="showChat()">Back to Chat</button>
            </div>
            
            <div class="faq-grid" id="faqGrid">
                <!-- FAQ items will be inserted here -->
            </div>
        </div>
    </div>

    <script>
        // Global State
        let messages = [];
        let triageSessions = [];
        let isLoading = false;
        let isListening = false;
        let recognition = null;

        // Mock Data
       const commonSymptoms = [
    { id: '1', name: 'Headache', keywords: 'headache, head pain, migraine, tension', isRedFlag: false },
    { id: '2', name: 'Fever', keywords: 'fever, high temperature, hot, chills', isRedFlag: false },
    { id: '3', name: 'Cough', keywords: 'cough, coughing, dry cough, wet cough', isRedFlag: false },
    { id: '4', name: 'Chest Pain', keywords: 'chest pain, chest pressure, heart pain', isRedFlag: true },
    { id: '5', name: 'Difficulty Breathing', keywords: 'difficulty breathing, shortness of breath, breathless', isRedFlag: true },
    { id: '6', name: 'Nausea', keywords: 'nausea, sick, queasy, vomiting, throw up', isRedFlag: false },
    { id: '7', name: 'Dizziness', keywords: 'dizzy, dizziness, lightheaded, vertigo, spinning', isRedFlag: false },
    { id: '8', name: 'Fatigue', keywords: 'tired, fatigue, exhausted, weak, no energy', isRedFlag: false },
    { id: '9', name: 'Abdominal Pain', keywords: 'stomach pain, abdominal pain, cramps, bloating', isRedFlag: false },
    { id: '10', name: 'Vomiting', keywords: 'vomit, throwing up, nausea, sick', isRedFlag: false },
    { id: '11', name: 'Diarrhea', keywords: 'diarrhea, loose stools, watery stool, upset stomach', isRedFlag: false },
    { id: '12', name: 'Severe Allergic Reaction', keywords: 'swelling, hives, anaphylaxis, throat swelling, difficulty breathing', isRedFlag: true },
    { id: '13', name: 'Back Pain', keywords: 'back pain, lower back, upper back, spine pain', isRedFlag: false },
    { id: '14', name: 'Fainting', keywords: 'faint, passed out, blackout, lose consciousness', isRedFlag: true },
    { id: '15', name: 'Rapid Heartbeat', keywords: 'fast heartbeat, palpitations, racing heart', isRedFlag: true }
];

const triageRules = [
    { symptom: 'Chest Pain', urgency: 'emergency', keywords: 'chest pain, heart pain, chest pressure' },
    { symptom: 'Difficulty Breathing', urgency: 'emergency', keywords: 'difficulty breathing, shortness of breath, can\'t breathe' },
    { symptom: 'Severe Bleeding', urgency: 'emergency', keywords: 'severe bleeding, heavy bleeding, blood loss' },
    { symptom: 'High Fever', urgency: 'severe', keywords: 'high fever, temperature over 103, very hot' },
    { symptom: 'Persistent Headache', urgency: 'moderate', keywords: 'severe headache, worst headache, persistent headache' },
    { symptom: 'Severe Allergic Reaction', urgency: 'emergency', keywords: 'swelling, hives, anaphylaxis, throat swelling' },
    { symptom: 'Fainting', urgency: 'emergency', keywords: 'faint, blackout, lose consciousness' },
    { symptom: 'Rapid Heartbeat', urgency: 'emergency', keywords: 'fast heartbeat, palpitations, racing heart' },
    { symptom: 'Severe Abdominal Pain', urgency: 'severe', keywords: 'abdominal pain, intense stomach pain, cramps' },
    { symptom: 'Persistent Vomiting', urgency: 'moderate', keywords: 'vomiting, throwing up continuously' },
    { symptom: 'Persistent Diarrhea', urgency: 'moderate', keywords: 'diarrhea, watery stools, prolonged loose stools' },
    { symptom: 'Back Pain Severe', urgency: 'moderate', keywords: 'back pain, spine pain, severe backache' }
];


        const urgencyGuidance = {
            emergency: '🚨 EMERGENCY: Call 108 immediately or go to the nearest emergency room. Do not delay seeking immediate medical attention.',
            severe: '⚠️ URGENT: Seek medical attention within 2-4 hours. Contact your doctor immediately or visit an urgent care center.',
            moderate: '⚡ MODERATE: Schedule an appointment with your healthcare provider within 24-48 hours. Monitor symptoms closely.',
            mild: '💡 MILD: Monitor symptoms and consider self-care measures. If symptoms worsen or persist, consult your healthcare provider.'
        };

        const clinics = [
            {
                id: '1',
                name: 'MEDIcover Hospital',
                address: ' Main street, Downtown, City HYD',
                phone: '9876543210',
                website: 'https://.com',
                type: 'Hospital'
            },
            {
                id: '2',
                name: 'QuickCare Urgent Care',
                address: 'Main street, Downtown, City HYD',
                phone: '(123) 456-7891',
                website: 'https://quickcare.com',
                type: 'Urgent Care'
            },
            {
                id: '3',
                name: 'Family Health Clinic',
                address: 'Main street, Downtown, City HYD',
                phone: '(123) 456-7892',
                website: 'https://familyhealth.com',
                type: 'Primary Care'
            }
        ];

        const faqs = [
            {
                id: '1',
                question: 'When should I call 108?',
                answer: 'Call 108 immediately if you experience chest pain, difficulty breathing, severe bleeding, loss of consciousness, signs of stroke, or any life-threatening emergency.',
                category: 'Emergency'
            },
            {
                id: '2',
                question: 'How accurate is this triage system?',
                answer: 'This digital triage tool is designed to provide general guidance only. It should not replace professional medical judgment. Always consult with healthcare professionals for proper diagnosis and treatment.',
                category: 'General'
            },
            {
                id: '3',
                question: 'What if my symptoms are not listed?',
                answer: 'You can describe your symptoms in your own words using the text input. Our system will analyze your description and provide appropriate guidance based on the information provided.',
                category: 'Usage'
            },
            {
                id: '4',
                question: 'Is my health information private?',
                answer: 'Yes, this is a demonstration app and does not store personal health information. In a real implementation, all health data would be protected according to HIPAA and other privacy regulations.',
                category: 'Privacy'
            }
        ];

        // Initialize App
        function init() {
            initializeSpeechRecognition();
            renderCommonSymptoms();
            renderFAQs();
            addWelcomeMessage();
        }

        // Speech Recognition
        function initializeSpeechRecognition() {
            if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
                const SpeechRecognition = window.webkitSpeechRecognition || window.SpeechRecognition;
                recognition = new SpeechRecognition();
                recognition.continuous = false;
                recognition.interimResults = false;
                recognition.lang = 'en-US';

                recognition.onresult = function(event) {
                    const transcript = event.results[0][0].transcript;
                    document.getElementById('messageInput').value = transcript;
                    isListening = false;
                    updateVoiceButton();
                };

                recognition.onerror = function() {
                    isListening = false;
                    updateVoiceButton();
                };

                recognition.onend = function() {
                    isListening = false;
                    updateVoiceButton();
                };
            }
        }

        function toggleVoiceInput() {
            if (!recognition) return;

            if (isListening) {
                recognition.stop();
                isListening = false;
            } else {
                recognition.start();
                isListening = true;
            }
            updateVoiceButton();
        }

        function updateVoiceButton() {
            const btn = document.getElementById('voiceBtn');
            btn.textContent = isListening ? '🔴' : '🎤';
        }

        // Message Functions
        function addWelcomeMessage() {
            const welcomeMessage = {
                id: generateId(),
                text: "Hello! I'm here to help assess your symptoms. Please describe what you're experiencing, or select from the common symptoms below.",
                isUser: false,
                timestamp: new Date()
            };
            messages.push(welcomeMessage);
            renderMessages();
        }

        function sendMessage() {
            const input = document.getElementById('messageInput');
            const text = input.value.trim();
            
            if (!text || isLoading) return;

            const userMessage = {
                id: generateId(),
                text: text,
                isUser: true,
                timestamp: new Date()
            };

            messages.push(userMessage);
            input.value = '';
            renderMessages();

            // Process the message
            processUserMessage(text);
        }

        function sendSymptomMessage(symptomName) {
            sendMessageWithText(symptomName);
        }

        function sendMessageWithText(text) {
            const userMessage = {
                id: generateId(),
                text: text,
                isUser: true,
                timestamp: new Date()
            };

            messages.push(userMessage);
            renderMessages();
            processUserMessage(text);
        }

        async function processUserMessage(text) {
            setLoading(true);

            // Simulate processing delay
            await new Promise(resolve => setTimeout(resolve, 1000));

            const analysis = analyzeSymptoms(text);
            
            // Create triage session
            const session = {
                id: generateId(),
                userInput: text,
                detectedSymptoms: analysis.detectedSymptoms,
                urgencyLevel: analysis.urgencyLevel,
                guidance: analysis.guidance,
                timestamp: new Date()
            };
            
            triageSessions.push(session);

            // Create bot response
            const botMessage = {
                id: generateId(),
                text: analysis.guidance,
                isUser: false,
                urgencyLevel: analysis.urgencyLevel,
                timestamp: new Date()
            };

            messages.push(botMessage);
            renderMessages();

            // Show clinics for severe cases
            if (analysis.urgencyLevel === 'severe' || analysis.urgencyLevel === 'emergency') {
                showClinics();
                
                const clinicMessage = {
                    id: generateId(),
                    text: "Here are nearby healthcare facilities that can help:",
                    isUser: false,
                    timestamp: new Date()
                };
                messages.push(clinicMessage);
                renderMessages();
            }

            setLoading(false);
        }
function analyzeSymptoms(userInput) {
    const inputLower = userInput.toLowerCase();
    
    const detectedSymptoms = [];
    let urgencyLevel = 'mild';

    // 1. Check emergency red-flag symptoms
    const redFlags = [
        'chest pain', 'difficulty breathing', 'severe bleeding', 'unconscious', 
        'stroke', 'heart attack', 'severe head injury', 'poisoning', 'overdose',
        'severe burns', 'choking', 'severe allergic reaction'
    ];
    for (const redFlag of redFlags) {
        if (inputLower.includes(redFlag)) {
            urgencyLevel = 'emergency';
            detectedSymptoms.push(redFlag);
        }
    }

    // 2. Check triageRules in order of severity
    const severityOrder = ['emergency', 'severe', 'moderate'];
    for (const rule of triageRules) {
        const keywords = rule.keywords.toLowerCase().split(',').map(k => k.trim());
        if (keywords.some(keyword => inputLower.includes(keyword))) {
            const ruleUrgencyIndex = severityOrder.indexOf(rule.urgency);
            const currentUrgencyIndex = severityOrder.indexOf(urgencyLevel);
            // Only escalate urgency
            if (ruleUrgencyIndex > currentUrgencyIndex) {
                urgencyLevel = rule.urgency;
            }
            detectedSymptoms.push(rule.symptom);
        }
    }

    // 3. Check common symptoms (non-red flag)
    for (const symptom of commonSymptoms) {
        const keywords = symptom.keywords.toLowerCase().split(',').map(k => k.trim());
        if (keywords.some(keyword => inputLower.includes(keyword))) {
            detectedSymptoms.push(symptom.name);
        }
    }

    return {
        urgencyLevel,
        detectedSymptoms,
        guidance: urgencyGuidance[urgencyLevel]
    };
}


        // Rendering Functions
        function renderMessages() {
            const container = document.getElementById('chatMessages');
            container.innerHTML = '';

            messages.forEach(message => {
                const messageDiv = document.createElement('div');
                messageDiv.className = `message ${message.isUser ? 'message-user' : 'message-bot'}`;
                
                messageDiv.innerHTML = `
                    <div class="message-content">
                        ${message.urgencyLevel ? `<div class="urgency-bar bg-${message.urgencyLevel}"></div>` : ''}
                        <div class="message-bubble ${message.isUser ? 'message-bubble-user' : 'message-bubble-bot'}">
                            <p class="font-paragraph">${message.text}</p>
                            <div class="message-footer">
                                <span class="text-sm">${message.timestamp.toLocaleTimeString()}</span>
                                ${message.urgencyLevel ? `<span class="badge bg-${message.urgencyLevel}">${message.urgencyLevel.toUpperCase()}</span>` : ''}
                            </div>
                        </div>
                    </div>
                `;
                
                container.appendChild(messageDiv);
            });

            // Add loading indicator if loading
            if (isLoading) {
                const loadingDiv = document.createElement('div');
                loadingDiv.className = 'message message-bot';
                loadingDiv.innerHTML = `
                    <div class="message-content">
                        <div class="message-bubble message-bubble-bot">
                            <div class="loading">
                                <div class="loading-dot"></div>
                                <div class="loading-dot"></div>
                                <div class="loading-dot"></div>
                            </div>
                        </div>
                    </div>
                `;
                container.appendChild(loadingDiv);
            }

            // Scroll to bottom
            container.scrollTop = container.scrollHeight;
        }

        function renderCommonSymptoms() {
            const container = document.getElementById('symptomsGrid');
            container.innerHTML = '';

            commonSymptoms.slice(0, 8).forEach(symptom => {
                const button = document.createElement('button');
                button.className = 'btn btn-outline btn-sm';
                button.textContent = symptom.name;
                button.onclick = () => sendSymptomMessage(symptom.name);
                container.appendChild(button);
            });
        }

        function renderFAQs() {
            const container = document.getElementById('faqGrid');
            container.innerHTML = '';

            faqs.forEach(faq => {
                const faqDiv = document.createElement('div');
                faqDiv.className = 'card';
                faqDiv.innerHTML = `
                    <h3 class="text-xl font-heading mb-4">${faq.question}</h3>
                    <p class="font-paragraph mb-4">${faq.answer}</p>
                    <span class="badge bg-mild">${faq.category}</span>
                `;
                container.appendChild(faqDiv);
            });
        }

        function showClinics() {
            const section = document.getElementById('clinicsSection');
            const container = document.getElementById('clinicsGrid');
            
            container.innerHTML = '';
            
            clinics.slice(0, 3).forEach(clinic => {
                const clinicDiv = document.createElement('div');
                clinicDiv.className = 'card';
                clinicDiv.innerHTML = `
                    <h4 class="font-heading mb-2">${clinic.name}</h4>
                    <div class="space-y-2 text-sm font-paragraph">
                        <div class="flex items-center gap-2">
                            <span>📍</span>
                            <span>${clinic.address}</span>
                        </div>
                        <div class="flex items-center gap-2">
                            <span>📞</span>
                            <span>${clinic.phone}</span>
                        </div>
                        <div class="flex items-center gap-2">
                            <span>🌐</span>
                            <a href="${clinic.website}" target="_blank" class="text-primary">Visit Website</a>
                        </div>
                    </div>
                `;
                container.appendChild(clinicDiv);
            });
            
            section.classList.remove('hidden');
        }

        // Navigation Functions
        function showChat() {
            document.getElementById('chatInterface').classList.remove('hidden');
            document.getElementById('dashboard').classList.add('hidden');
            document.getElementById('faqSection').classList.add('hidden');
        }

        function showDashboard() {
            document.getElementById('chatInterface').classList.add('hidden');
            document.getElementById('dashboard').classList.remove('hidden');
            document.getElementById('faqSection').classList.add('hidden');
            renderDashboard();
        }

        function showFAQs() {
            document.getElementById('chatInterface').classList.add('hidden');
            document.getElementById('dashboard').classList.add('hidden');
            document.getElementById('faqSection').classList.remove('hidden');
        }

        function renderDashboard() {
            const tbody = document.getElementById('dashboardTable');
            tbody.innerHTML = '';

            triageSessions.forEach(session => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td class="font-paragraph text-sm">${session.timestamp.toLocaleString()}</td>
                    <td class="font-paragraph">${session.userInput}</td>
                    <td class="font-paragraph">${session.detectedSymptoms.join(', ') || 'None detected'}</td>
                    <td><span class="badge bg-${session.urgencyLevel}">${session.urgencyLevel.toUpperCase()}</span></td>
                    <td class="font-paragraph text-sm max-w-md">${session.guidance}</td>
                `;
                tbody.appendChild(row);
            });
        }

        // Utility Functions
        function setLoading(loading) {
            isLoading = loading;
            const sendBtn = document.getElementById('sendBtn');
            const input = document.getElementById('messageInput');
            
            sendBtn.disabled = loading;
            input.disabled = loading;
            
            renderMessages();
        }

        function handleKeyPress(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }

        function generateId() {
            return Math.random().toString(36).substr(2, 9);
        }

        // Initialize the app when the page loads
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>